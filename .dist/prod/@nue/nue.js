function u(Y){const{root:Q,fn:L,fns:P,deps:g,ctx:N}=Y;var F,K,U,W,V,_,Z=[];function R(H){return new Proxy({},{get(E,X){if(_){const S=W.indexOf(X);if(S>=0)return H[S]}return X===W?H:W.includes(X)?H[X]:X==V?U.indexOf(H):N[X]}})}function I(H,E,X,S){const J=O({fns:P,dom:Q.cloneNode(!0)},R(H),g,N);Z[S?"unshift":"push"](J),J.before(S||F),N.oninsert?.call(N,J.$el,H,{index:E,is_repaint:!!X,is_first:!E,is_last:E==U.length-1,items:U})}function j(){Z.forEach((H)=>H.unmount()),Z=[],U.forEach(I)}function w(H){const{unshift:E,splice:X,push:S,sort:J,reverse:q}=H;return Object.assign(H,{push(z){S.call(U,z),I(z,U.length-1)},unshift(z){E.call(U,z),I(z,0,null,Z[0].$el)},sort(z){J.call(U,z),j()},reverse(){q.call(U),j()},splice(z,D){Z.slice(z,z+D).forEach((G)=>G.unmount()),Z.splice(z,D),X.call(U,z,D)},shift(){H.splice(0,1)},pop(){H.splice(H.length-1,1)},remove(z){const D=U.indexOf(z);if(D>=0)H.splice(D,1)}})}function $(){var H;if([W,H=[],V,_]=L(N),U){if(H!==K)U=w(H),j(),K=H;return Z.forEach((E)=>E.update())}if(H){const E=Q.parentElement;F=new Text(""),E.insertBefore(F,Q),E.removeChild(Q),U=w(H),H.forEach(I),K=H}}return{update:$}}function h(Y){const{root:Q,fn:L,fns:P,deps:g,ctx:N}=Y,F=[];var K=Q,U,W;function V(Z,R){Y.processAttrs(Z);const I=O({fns:P,dom:Z},N,g,N);F.push(I),I.fn=R}V(Q,L);while(K=K.nextElementSibling){const Z=K.getAttribute(":else-if");if(Z)V(K,P[Z]),K.removeAttribute(":else-if");else if(K.hasAttribute(":else"))V(K,()=>!0),K.removeAttribute(":else");else{W=K;break}}function _(){if(!U){const R=Q.parentElement;U=new Text(""),R.insertBefore(U,Q)}const Z=F.find((R)=>R.fn(N));F.forEach((R)=>R==Z?R.before(U):R.unmount())}return{update:_,next:W}}var y=function(Y){const Q=document.createElement("_");return Q.innerHTML=Y.trim(),Q.firstChild},A=function(Y,Q=""){return Y?.join?Y.filter((L)=>L||L===0).join(Q).trim().replace(/\s+/g," "):Y||""},f=function(Y,Q){if(Y==Q)return[Y];if(!Y.join)Y=[Y];if(Q&&!Q.join)Q=[Q];return Y.concat(Q)},b={":if":h,":for":u},x=["class","style","id"];function O(Y,Q={},L=[],P={}){const{Impl:g,tmpl:N,fns:F=[],dom:K,inner:U}=Y,W=[];function V(q){const z=q.nodeType;if(z==3){const[D,G]=/:(\d+):/.exec(q.textContent.trim())||[],M=F[G];if(M)W.push((B)=>q.textContent=A(M(J)))}if(z==1){for(let B in b){const C=F[q.getAttribute(B)];if(B==":if"&&C&&q.getAttribute(":for"))if(C(J))continue;else q.removeAttribute(":for");if(C){q.removeAttribute(B);const T=b[B]({root:q,fn:C,fns:F,deps:L,ctx:J,processAttrs:_});return W.push(T.update),T}}const D=q.tagName.toLowerCase(),G=q.nextSibling;if(U&&D=="slot")return U.replace(q),{next:G};const M=L.find((B)=>B.name==D);if(M){if(q.firstChild){const T=document.createElement("_");T.append(...q.childNodes),M.inner=O({fns:F,dom:T},J,L)}const B=$(q),C=O(M,J,L,B).mount(q);if(K?.tagName.toLowerCase()==M.name)S.$el=C.$el;return W.push((T)=>H(C.$el,B)),S.$refs[q.getAttribute("ref")||D]=C.impl,{next:G}}else _(q),I(q,V)}}function _(q){for(let z of[...q.attributes])R(q,z.name,z.value)}function Z(q,z,D){if(q.getAttribute(z)!==D)q.setAttribute(z,D)}function R(q,z,D){if(z=="ref"||z=="name")S.$refs[D]=q;const G=F[D];if(!G)return;const M=z.slice(1),B=z[0];if(":@$".includes(B))q.removeAttribute(z);if(M=="attr")return W.push((C)=>{for(let[T,v]of Object.entries(G(J)))Z(q,T,v===!0?"":v)});if(B==":"){if(M!="bind")W.push((C)=>{let T=G(J);Z(q,M,A(T))})}else if(B=="@")q[`on${M}`]=(C)=>{G.call(J,J,C),(P?.update||E)()};else if(B=="$")W.push((C)=>{if(!(q[M]=!!G(J)))q.removeAttribute(M)});if(M=="html")W.push((C)=>q.innerHTML=G(J))}function I(q,z){let D=q.firstChild;while(D)D=z(D)?.next||D.nextSibling}function j(q,z){const D=q.getAttribute(":"+z),G=F[D];return G?G(J):J[D]||q.getAttribute(z)||q[z]||void 0}function w(q){const z={};for(let D of[...q.attributes]){const G=D.name.replace(":",""),M=j(q,G);if(!x.includes(G)&&typeof M!="object")z[G]=M==null?!0:M}return z}function $(q){return q.$attrs=w(q),new Proxy(q,{get(z,D){return j(q,D)}})}function H(q,z){const D=f(j(q,"class")||[],z.class);if(D[0])q.className=A(D," ");const{id:G,style:M}=z;if(M&&M.x!="")q.style=A(M);if(G)q.id=A(G)}function E(q){if(q)Object.assign(X,q);return W.map((z)=>z()),X.updated?.call(J,J),S}let X={};const S={update:E,$el:K,get root(){return S.$el},$refs:{},$parent:P,impl:X,mountChild(q,z,D){const G=L.find((M)=>M.name==q);if(G)O(G,D,L,J).mount(z)},mount(q){const z=K||(S.$el=y(N));let D=q.querySelector("script");if(D)Object.assign(Q,JSON.parse(D.textContent)),q.insertAdjacentElement("afterend",D);if(g)X=S.impl=new g(J),X.mountChild=S.mountChild,X.$refs=S.$refs,X.update=E;V(z),q.replaceWith(z);for(let G of[...q.attributes])Z(z,G.name,G.value);return X.mounted?.call(J,J),E()},append(q){const z=document.createElement("b");return q.append(z),S.mount(z)},replace(q){V(K),q.replaceWith(...K.children),E()},before(q){if(K){if(S.$el=K,!document.body.contains(K))q.before(K);if(!K.walked)V(K),K.walked=1;return E()}},unmount(){try{S.root.remove()}catch(q){}X.unmounted?.call(J,J),E()}},J=new Proxy({},{get(q,z){for(let D of[S,X,Q,P,P.bind]){const G=D&&D[z];if(G!=null)return G}},set(q,z,D){if(P&&P[z]!==void 0)P[z]=D,P.update();else S[z]=D;return!0}});return S}export{O as default,O as createApp};
